<html>
<head>
    <title>BirthDay by NIC</title>
    <link rel="stylesheet" type="text/css" href="input.css">
</head>

<body>
<div class="inputBox">
    <p>ENTER YOUR NIC</p>
    <p>NUMBER</p>

    <from action="output.html" name="formInner">
        <input type="text" id="nIc" name="nic">
        <button type="button" name="btn" value="Data" onclick="btnClick()">BirthDay</button>
    </from>
</div>
<script>
    function btnClick() {
        var nicNumber, birthDay, sYear, days;
        nicNumber = document.getElementById("nIc").value;
        console.log(nicNumber);

        sYear = "";
        days = "";

        if (nicNumber.length == 12) {
            for (var i = 0; i < 7; i++) {
                if (i < 4) {
                    sYear += nicNumber.charAt(i);
                }
                if (i > 3) {
                    days += nicNumber.charAt(i);
                }
            }
        } else {
            sYear = "19";
            for (var i = 0; i < 5; i++) {
                if (i < 2) {
                    sYear += nicNumber.charAt(i);
                }
                if (i < 5 && i > 1) {
                    days += nicNumber.charAt(i);
                }
            }
        }
        // 200115402137
        // 686800423v

        var year = 1, noOfDates = 1;
        noOfDates = parseInt(days);
        year = parseInt(sYear);

        if (noOfDates < 500) {
            birthDay = find(year, noOfDates - 2);
        } else {
            birthDay = find(year, noOfDates - 501);
        }

    }

    function find(year, days) {
        var date;
        date = new Date(null);
        date.setFullYear(year);
        date.setMonth(0);
        date.setDate(date.getDate() + days);
        console.log(date);
        window.location.href = "output.html";
        passvalue(date.getFullYear(), date.getMonth(), date.getDate());

    }

    function passvalue(year, month, date) {
        // var val=document.getElementById("nIc").value;

        var dob = year + "-" + (month + 1) + "-" + date;

        localStorage.setItem("date", date);
        localStorage.setItem("DOB", dob);

        const monthName = ["January", "February", "March", "April", "May", "June", "July", "Auguest", "September", "October", "November", "December"];

        localStorage.setItem("month", monthName[month]);

        var age, curDate;
        curDate = new Date();

        age = curDate.getFullYear() - year;


        localStorage.setItem("age", age);

        return false;
    }


</script>
</body>

</html>